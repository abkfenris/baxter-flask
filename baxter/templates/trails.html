{% extends "base.html" %}
{% block title %}Trails{% endblock %}

{% block body_attribs %} class="baxter-trails"{% endblock %}


{% block styles %}
{{ super() }}
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="https://raw.github.com/calvinmetcalf/leaflet-ajax/master/dist/leaflet.ajax.min.js"></script>
<script src="http://maps.google.com/maps/api/js?v=3&sensor=false"></script>
<script src="https://raw.githubusercontent.com/shramov/leaflet-plugins/master/layer/tile/Google.js"></script>
<script>
var map = L.map('map').setView([46.05,-68.94], 11);

var mapbox = L.tileLayer('http://{s}.tiles.mapbox.com/v3/{{ config['MAPBOX_MAP_ID'] }}/{z}/{x}/{y}.png', {
	attribution: 'Map data &copy; [...]',
	maxZoom: 18
})

mapbox.addTo(map);

var ggl = new L.Google();
var ggl2 = new L.Google('TERRAIN');

var baseMaps = {
	"MapBox": mapbox,
	"Google Satellite": ggl,
	"Google Terrain": ggl2
}

map.addControl(new L.Control.Layers( baseMaps, {}));

function popUp(feature, layer) {
	layer.bindPopup('<a href="' + feature.properties.html + '">' + feature.properties.name + '</a>');
}

var geojsonLayer = new L.GeoJSON.AJAX("{{ url_for('api.list_trails' ) }}", {onEachFeature:popUp});
geojsonLayer.addTo(map);
</script>
{% endblock %}



{% block content %}
	<div class="jumbotron" style="background-image: url({{ url_for('static', filename='img/header.jpg' ) }}); background-size: 100%;">
  		<div class="container">
	  		<h1>Trails</h1>
  		</div>
	</div>

	<div class="container">
		<div id="map" style="height: 600px;"></div>

		<div class="list-group">
			{% for trail in trails %}
			<a href="{{ url_for('main.trail', id=trail.id) }}" class="list-group-item">{{ trail.name }}</a>
			{% endfor %}
		</div>


	</div>

  </div>

</div>
</div>

{% endblock %}
